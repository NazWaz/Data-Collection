#%%
from selenium import webdriver 
from selenium.webdriver.common.by import By
import os
import time
#%%
class Scraper():

    def __init__(self):
        self.driver = webdriver.Chrome()
        self.driver.get("https://www.imdb.com/chart/top")
        self._accept_cookies()

    def accept_cookies(self):


    def get_site(self):

    
if __name__ == "__main__":
    scraper = Scraper()

#%%
scraper.driver.quit()
#%%
driver = webdriver.Chrome()
url = "https://www.imdb.com/chart/top"
driver.get(url)
time.sleep(2)
links = []
titles = []
release_dates = []
age_ratings = []
runtimes = []
genres = []
ratings = []
 #%%
def accept_cookies():
    accept_button = driver.find_element(By.XPATH, "//button[@id='onetrust-accept-btn-handler']")
    accept_button.click()

#%%
def get_movie_links():
    movie_list = driver.find_element(By.XPATH, "//tbody[@class = 'lister-list']")
    movies = movie_list.find_elements(By.XPATH, "tr/td/a")
    for movie in movies:
        l = movie.get_attribute("href")
        if l not in links:
            links.append(l)

#%%
def get_movie_title():
    t1 = driver.find_element(By.XPATH, "//h1[@data-testid='hero-title-block__title']").text
    titles.append(t1)
    print(titles)

#%%
def get_movie_release_date():
    d1 = driver.find_element(By.XPATH, "//ul[@data-testid='hero-title-block__metadata']")
    d2 = d1.find_element(By.XPATH, "li[1]").text
    release_dates.append(d2)
    print(release_dates)

#%%
def get_movie_age_rating():
    d1 = driver.find_element(By.XPATH, "//ul[@data-testid='hero-title-block__metadata']")
    ar1 = d1.find_element(By.XPATH, "li[2]").text
    age_ratings.append(ar1)
    print(age_ratings)
#%%
def get_movie_runtime():
    d1 = driver.find_element(By.XPATH, "//ul[@data-testid='hero-title-block__metadata']")
    r1 = d1.find_element(By.XPATH, "li[3]").text
    runtimes.append(r1)
    print(runtimes)
#%%
def get_all_movie_data():
    get_movie_links()
    for mt in links[:5]:
        driver.get(mt)
        get_movie_title()
        get_movie_release_date()
        get_movie_age_rating()
        get_movie_runtime()

#%%
get_all_movie_data()

#%%
get_movie_title()
#%%
get_movie_release_date()
#%%
get_movie_age_rating()
#%%
get_movie_runtime()
#%%
driver.quit()